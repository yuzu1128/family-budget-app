# Deployment Guide

## Deploying to Fly.io

You can deploy this application as a Docker container on Fly.io.

### Prerequisites

1.  **Fly.io CLI:** Installed and authenticated (`fly auth login`).
2.  **Supabase:** Project URL and Anon Key ready.

### Steps

1.  **Initialize App:**
    Run the following command in the `family-budget-app` directory:
    ```bash
    fly launch
    ```
    -   **App Name:** Choose a unique name (or let it generate one).
    -   **Region:** Select a region close to you (e.g., `nrt` for Tokyo).
    -   **Database:** Select "None" (we are using Supabase).
    -   **Redis:** Select "None".

2.  **Set Secrets (Environment Variables):**
    Fly.io requires environment variables to be set as secrets for the build/runtime.
    Since this is a Vite app, variables starting with `VITE_` are embedded at **build time**.
    
    You have two options:

    **Option A: Build Args (Recommended for VITE variables)**
    Open `fly.toml` generated by `fly launch` and add the build args under `[build.args]`:
    
    ```toml
    [build]
      [build.args]
        VITE_SUPABASE_URL = "your_supabase_url"
        VITE_SUPABASE_ANON_KEY = "your_supabase_anon_key"
    ```
    *(Note: Be careful committing secrets to Git. For a private repo, this is acceptable. For higher security, use Docker build secrets, but `fly.toml` is easiest for now.)*

    **Option B: Runtime Secrets (Only works if we serve a Node server, but we are serving static files via Nginx)**
    For this static setup, **Option A** is required because Vite replaces variables at build time.

3.  **Deploy:**
    ```bash
    fly deploy
    ```

4.  **Verify:**
    Open your app URL (e.g., `https://your-app-name.fly.dev`).

### Alternative: Vercel / Cloudflare Pages

If you prefer a static host:
1.  Connect your GitHub repo to Vercel/Cloudflare.
2.  Add `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY` in their dashboard settings.
3.  Deploy.
